# 1. Использование PostgreSQL в качестве основного хранилище данных

Date: 2023-06-06

## Status

Accepted

## Context

Для хранения информации о клиентах, совершаемых платежах, подписках и т.д. необходимо зранить информацию в долговременном носителе;

## Decision

#### SQL хранилище на основе PostgreSQL 14

##### Плюсы

* Возможность совершать запросы к хранилищу по различным критериям (поиск всех клиентов с неоплачеными счетами, различные критерии выбора клиентов и т.д.)

##### Минусы

* Необходимо заранее продумать модель данных, критерии индексирования. Будет затруднено хранение слабоструктурированных данных.
* Для построения кластера нужно применять внешнее решение (patroni)

#### NoSQL хранилище на основе MongoDB

##### Плюсы

Возможность менять/расширять модель хранения данных. Высокопроизводительные запросы по ключевым полям. Возможность построения кластера (из коробки)

##### Минусы

Произвольные запросы по связанным сущностям, будут не так эффективны.

## Результат

Вариант 1

### Consequences

Для обеспечения отказоустойчивости необходимо отдельно разворачивать кластер на patroni.
