## Runtime

### Use-cases

#### UC01 Поиск и аренда дрона
##### Описание
Начало использования дрона: включает поиск, аренду и установление объекта слежения
##### Действующие лица
Клиент
##### Максимальные гарантии
Дрон найден и выбран, для дрона установлена цель слежения, на счету клиента достаточно средств
##### Предусловия
* Клиент успешно авторизован в системе
* Данные о маршрутах детей внесены в систему
* Данные о мобильных телефонах детей внесены в систему
##### Диаграмма
![](embed:UC01)
##### Шаги основного сценария
1. Клиент открывает мобильное приложение 
2. Мобильное приложение запрашивает данные для аутентификации клиента и проверяет их через WebSSO
3. Клиент выбирает раздел "Заказ дрона"
4. Мобильное приложение запрашивает backend для поиска дрона
5. Backend мобильного приложения запускает на BPM сценарий поиска дрона
6. BPM получает в CRM данные по клиенту и его детям
7. BPM получает информацию о маршруте ребенка
8. BPM получает информацию о текущем положении ребенка из MLC
9. BPM получает данные по достаточности баланса у клиента
10. BPM получает данные в inventory о свободных дронах
11. BPM передает команду на дрона о начале трэкинга
    
##### Альтернативные сценарии
9.a У клиента недостаточно средств на счету, в мобильное приложение возвращается код ошибки. Клиенту предлагается пополнить счет


### Потоки данных

|id|Система поставщик|Система потребитель|Сущности|Тип интеграции|
---|-----------------|-------------------|--------|---------------
|1|MLC|мобильный телохранитель|Геопозиция клиента|REST API|
|2|SSO|мобильный телохранитель|Клиент|REST API|